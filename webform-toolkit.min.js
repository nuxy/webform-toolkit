"use strict";function WebformToolkit(a,p,v){var f=this;function b(e,t){var r=null;switch(t.type){case"password":case"text":r=o(t);break;case"file":r=function(e){var t=document.createElement("input");t.setAttribute("type","file"),e.name&&t.setAttribute("name",e.name);return t}(t);break;case"textarea":r=function(e){var t=document.createElement("textarea");t.setAttribute("name",e.name),e.placeholder&&t.setAttribute("placeholder",e.placeholder);return t.required=!!e.required,t}(t);break;case"select":r=function(e){var t=document.createElement("select");t.classList.add("menu"),t.setAttribute("name",e.name);var r=e.filter.split("|"),n=!1;null!=e&&e.value&&(r.unshift(e.value),n=!0);for(var a=0;a<r.length;a++){var i=r[a],l=document.createElement("option");l.textContent=i,n?n=!1:l.setAttribute("value",i),i==e.value&&(l.selected=!0),t.appendChild(l)}return t.required=!!e.required,t}(t);break;case"radio":r=function(e){var t=document.createElement("div");t.classList.add("radios");for(var r=e.filter.split("|"),n=0;n<r.length;n++){var a=r[n],i=document.createElement("input");i.setAttribute("type","radio"),i.setAttribute("name",e.name),i.setAttribute("value",a),a==e.value&&(i.checked=!0);var l=document.createElement("span");l.textContent=a,t.appendChild(i),t.appendChild(l)}return t}(t);break;case"checkbox":r=function(e){var t=document.createElement("div");t.classList.add("checkbox");var r=document.createElement("span");r.textContent=e.label;var n=document.createElement("input");n.setAttribute("type","checkbox"),n.setAttribute("name",e.name),n.setAttribute("value",e.value),e.value&&(n.checked=!0);return n.required=!!e.required,t.appendChild(n),t.appendChild(r),t}(t);break;case"hidden":return o(t);default:throw new Error("Invalid or missing field type")}(null==t?void 0:t.id)&&r.setAttribute("id",t.id);var n=document.createElement("div");if("checkbox"!==t.type){var a=document.createElement("label");if(a.setAttribute("for",t.id),t.required){var i=document.createElement("span");i.classList.add("required"),a.appendChild(i)}a.textContent=t.label,n.appendChild(a)}if(null!=t&&t.filter){r.regex=t.filter,r.message=t.error,r.error=!1;var l=function(){(function(t){var e=null==t?void 0:t.value;if(!e)return;var r=t.regex,n=t.error,a=t.message,i=new RegExp(r,"g"),l=!1;switch(t.tagName){case"INPUT":case"SELECT":case"TEXTAREA":l=i.test(e)}var d=t.parentNode,o=null;!1===l&&!1===n?((o=document.createElement("p")).classList.add("error-message"),o.textContent=a,d.appendChild(o),t.classList.add("error-on"),t.error=!0,o.style.display="block",o.style.opacity=0,function e(){var t=parseFloat(o.style.opacity);1<(t+=.1)==!1&&(o.style.opacity=t,window.requestAnimationFrame(e))}()):!0===l&&!0===n&&(o=d.querySelector("p"),t.error=!1,function e(){(o.style.opacity-=.1)<.1?(t.classList.remove("error-on"),o.style.display="none",o.remove()):window.requestAnimationFrame(e)}())})(this),u(e)};"select"===t.type?r.addEventListener("change",l):(r.addEventListener("focusout",l),r.addEventListener("keypress",l),r.addEventListener("keyup",l),r.addEventListener("mouseout",l))}if(n.appendChild(r),null!=t&&t.description){var d=document.createElement("p");d.classList.add("description"),d.textContent=t.description,n.appendChild(d)}return n}function o(e){var t=document.createElement("input");return e.type&&t.setAttribute("type",e.type),e.name&&t.setAttribute("name",e.name),e.value&&t.setAttribute("value",e.value),e.maxlength&&t.setAttribute("maxlength",e.maxlength),e.placeholder&&t.setAttribute("placeholder",e.placeholder),t.required=!!e.required,t}function u(e){e.querySelector('input[type="submit"]').disabled=h(e)}function h(e){for(var t=e.querySelectorAll("input, select, textarea"),r=0;r<t.length;r++){var n=t[r];if(("INPUT"!=n.tagName||/text|password|radio|checkbox/.test(n.type))&&(null!=n&&n.required&&(!n.value||(null==n?void 0:n.selectedIndex)<=0)||n.error))return!0}}return function(){var e=p.action,t=p.groups;if(!e||!t.length)throw new Error("Failed to initialize (missing settings)");!function(){var e=function(){var r=document.createElement("form");r.classList.add("webform"),null!=p&&p.action&&(r.setAttribute("method","POST"),r.setAttribute("enctype","multipart/form-data"),r.setAttribute("action",p.action));if(null!=p&&p.params)for(var e=p.params.split("&"),t=0;t<e.length;t++){var n=e[t].split("="),a=document.createElement("input");a.setAttribute("aria-hidden","true"),a.setAttribute("type","hidden"),a.setAttribute("name",n[0]),a.setAttribute("value",n[1]),r.appendChild(a)}for(var i=0;i<p.groups.length;i++){var l=p.groups[i],d=document.createElement("fieldset");if(d.classList.add("field-group"+i),l.legend){var o=document.createElement("legend");o.textContent=l.legend,d.appendChild(o)}for(var u=0;u<l.fields.length;u++){var s=b(r,l.fields[u]);d.appendChild(s)}r.appendChild(d)}var c=document.createElement("div");c.classList.add("form-submit");var m=document.createElement("input");return m.setAttribute("type","submit"),m.setAttribute("value","Submit"),r.addEventListener("submit",function(e){if(e.preventDefault(),!h(r))if("function"==typeof v){var t=new FormData(r);v(Object.fromEntries(t))}else f.submit()}),c.appendChild(m),r.appendChild(c),r}();a.appendChild(e),u(e)}()}(),f.create=function(e,t){var r=a.querySelector("form"),n=b(r,e);if(!r||!n||"function"!=typeof t)throw new Error("Failed to create (malformed config)");t(r,n)},f}window.webformToolkit=function(e,t,r){return new WebformToolkit(e,t,r)},"undefined"!=typeof module&&module.exports&&(module.exports=WebformToolkit);