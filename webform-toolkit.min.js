"use strict";function WebformToolkit(n,p,v){var f=this;function b(e,t){var r=null;switch(t.type){case"color":case"date":case"email":case"number":case"password":case"quantity":case"range":case"text":case"time":r=s(t);break;case"file":r=function(e){var t=document.createElement("input");t.setAttribute("type","file"),e.name&&t.setAttribute("name",e.name);return t}(t);break;case"textarea":r=function(e){var t=document.createElement("textarea");t.setAttribute("name",e.name),e.placeholder&&t.setAttribute("placeholder",e.placeholder);return t.required=!!e.required,t}(t);break;case"select":r=function(e){var t=document.createElement("select");t.classList.add("menu"),t.setAttribute("name",e.name);var r=e.filter.split("|"),a=!1;null!=e&&e.value&&(r.unshift(e.value),a=!0);for(var n=0;n<r.length;n++){var i=r[n],l=document.createElement("option");l.textContent=i,a?a=!1:l.setAttribute("value",i),i==e.value&&(l.selected=!0),t.appendChild(l)}return t.required=!!e.required,t}(t);break;case"radio":r=function(e){var t=document.createElement("div");t.classList.add("radios");for(var r=e.filter.split("|"),a=0;a<r.length;a++){var n=r[a],i=document.createElement("input");i.setAttribute("type","radio"),i.setAttribute("name",e.name),i.setAttribute("value",n),n==e.value&&(i.checked=!0);var l=document.createElement("span");l.textContent=n,t.appendChild(i),t.appendChild(l)}return t}(t);break;case"checkbox":r=function(e){var t=document.createElement("div");t.classList.add("checkbox");var r=document.createElement("span");r.textContent=e.label;var a=document.createElement("input");a.setAttribute("type","checkbox"),a.setAttribute("name",e.name),a.setAttribute("value",e.value),e.value&&(a.checked=!0);return a.required=!!e.required,t.appendChild(a),t.appendChild(r),t}(t);break;case"hidden":return s(t);default:throw new Error("Invalid or missing field type")}(null==t?void 0:t.id)&&r.setAttribute("id",t.id);var a=document.createElement("div");if("checkbox"!==t.type){var n=document.createElement("label");if(n.setAttribute("for",t.id),t.required){var i=document.createElement("span");i.classList.add("required"),n.appendChild(i)}n.textContent=t.label,a.appendChild(n)}if(null!=t&&t.filter){r.regex=t.filter,r.message=t.error,r.error=!1;var l=function(){(function(t){var e=null==t?void 0:t.value;if(!e)return;var r=t.regex,a=t.error,n=t.message,i=new RegExp(r,"g"),l=!1;switch(t.tagName){case"INPUT":case"SELECT":case"TEXTAREA":l=i.test(e)}var u=t.parentNode,s=u.querySelector("label"),d=null;if(!1===l&&!1===a){var o="error-"+t.id;s.setAttribute("aria-invalid","true"),(d=document.createElement("p")).classList.add("error-message"),d.setAttribute("id",o),d.setAttribute("aria-invalid","true"),d.textContent=n,u.appendChild(d),t.classList.add("error-on"),t.setAttribute("aria-describedBy",o),t.setAttribute("aria-invalid","true"),t.error=!0,d.style.display="block",d.style.opacity=0,function e(){var t=parseFloat(d.style.opacity);1<(t+=.1)==!1&&(d.style.opacity=t,window.requestAnimationFrame(e))}()}else!0===l&&!0===a&&(d=u.querySelector("p"),t.error=!1,function e(){(d.style.opacity-=.1)<.1?(s.removeAttribute("aria-invalid"),t.classList.remove("error-on"),t.removeAttribute("aria-describedBy"),t.removeAttribute("aria-invalid"),d.style.display="none",d.remove()):window.requestAnimationFrame(e)}())})(this),d(e)};"select"===t.type?r.addEventListener("change",l):(r.addEventListener("focusout",l),r.addEventListener("keypress",l),r.addEventListener("keyup",l),r.addEventListener("mouseout",l))}if(a.appendChild(r),null!=t&&t.description){var u=document.createElement("p");u.classList.add("description"),u.setAttribute("role","info"),u.textContent=t.description,a.appendChild(u)}return a}function s(e){var t=document.createElement("input");return e.type&&t.setAttribute("type",e.type),e.name&&t.setAttribute("name",e.name),e.value&&t.setAttribute("value",e.value),null==e||!e.maxlength||"password"!==e.type&&"text"!==e.type||t.setAttribute("maxlength",e.maxlength),(null!=e&&e.max||null!=e&&e.min||null!=e&&e.step&&("number"===e.type||"quantity"===e.type))&&(t.setAttribute("max",e.max),t.setAttribute("min",e.min),"step"===e.type&&t.setAttribute("step",e.step)),null!=e&&e.placeholder&&t.setAttribute("placeholder",e.placeholder),t.required=!!e.required,t}function d(e){e.querySelector('input[type="submit"]').disabled=h(e)}function h(e){for(var t=e.querySelectorAll("input, select, textarea"),r=0;r<t.length;r++){var a=t[r];if(("INPUT"!=a.tagName||/text|password|radio|checkbox/.test(a.type))&&(null!=a&&a.required&&(!a.value||(null==a?void 0:a.selectedIndex)<=0)||a.error))return!0}}return function(){var e=p.action,t=p.groups;if(!e||!t.length)throw new Error("Failed to initialize (missing settings)");!function(){var e=function(){var r=document.createElement("form");r.classList.add("webform"),null!=p&&p.action&&(r.setAttribute("method","POST"),r.setAttribute("enctype","multipart/form-data"),r.setAttribute("action",p.action));if(null!=p&&p.params)for(var e=p.params.split("&"),t=0;t<e.length;t++){var a=e[t].split("="),n=document.createElement("input");n.setAttribute("aria-hidden","true"),n.setAttribute("type","hidden"),n.setAttribute("name",a[0]),n.setAttribute("value",a[1]),r.appendChild(n)}for(var i=0;i<p.groups.length;i++){var l=p.groups[i],u=document.createElement("fieldset");if(u.classList.add("field-group"+i),l.legend){var s=document.createElement("legend");s.textContent=l.legend,u.appendChild(s)}for(var d=0;d<l.fields.length;d++){var o=b(r,l.fields[d]);u.appendChild(o)}r.appendChild(u)}var c=document.createElement("div");c.classList.add("form-submit");var m=document.createElement("input");return m.setAttribute("type","submit"),m.setAttribute("value","Submit"),r.addEventListener("submit",function(e){if(e.preventDefault(),!h(r))if("function"==typeof v){var t=new FormData(r);v(Object.fromEntries(t))}else f.submit()}),c.appendChild(m),r.appendChild(c),r}();n.appendChild(e),d(e)}()}(),f.create=function(e,t){var r=n.querySelector("form"),a=b(r,e);if(!r||!a||"function"!=typeof t)throw new Error("Failed to create (malformed config)");t(r,a)},f}window.webformToolkit=function(e,t,r){return new WebformToolkit(e,t,r)},"undefined"!=typeof module&&module.exports&&(module.exports=WebformToolkit);